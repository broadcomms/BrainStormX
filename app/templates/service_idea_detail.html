{% extends 'main_template.html' %}
{% block title %}Idea Detail • BrainStormX{% endblock %}
{% block content %}
<div class="container py-4">
	<nav aria-label="breadcrumb" class="mb-3">
		<ol class="breadcrumb small mb-0">
			<li class="breadcrumb-item"><a href="{{ url_for('ideas_bp.list_ideas') }}">Ideas</a></li>
			<li class="breadcrumb-item active" aria-current="page">Detail</li>
		</ol>
	</nav>

	<div class="row g-4">
		<div class="col-lg-8">
			<div class="card border-0 shadow-sm">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start mb-3">
						<span class="badge bg-warning-subtle text-warning-emphasis"><i class="bi bi-lightbulb me-1"></i>Idea</span>
						{% if cluster %}<span class="badge bg-body-secondary text-dark border">Cluster: {{ cluster.name }}</span>{% endif %}
					</div>
					<h1 class="h4 mb-3">{{ idea.content }}</h1>
					<table class="table table-sm align-middle small mb-3">
						<tbody>
							<tr><th class="text-body-secondary fw-semibold w-30">Workshop</th><td>{{ workshop.title if workshop else '(Unknown)' }}</td></tr>
							<tr><th class="text-body-secondary fw-semibold">Created</th><td>{{ idea.timestamp.strftime('%Y-%m-%d %H:%M') }}</td></tr>
							{% if cluster %}
							<tr><th class="text-body-secondary fw-semibold">Cluster</th><td>{{ cluster.name }}</td></tr>
							{% endif %}
							<tr><th class="text-body-secondary fw-semibold">Cluster Votes</th><td>{{ vote_count }}</td></tr>
							<tr><th class="text-body-secondary fw-semibold">Finalist</th><td>{% if is_finalist %}<span class="badge bg-success-subtle text-success-emphasis">Yes</span>{% else %}<span class="badge bg-secondary-subtle text-secondary-emphasis">No</span>{% endif %}</td></tr>
						</tbody>
					</table>
					<div class="small text-body-secondary">This idea represents a final selection from a completed workshop.</div>
				</div>
			</div>
		</div>
		<div class="col-lg-4">
			<div class="card border-0 shadow-sm h-100">
				<div class="card-header bg-transparent fw-semibold">Related Ideas</div>
				<div class="card-body">
					{% if related %}
						<div class="list-group list-group-flush small">
							{%- for r in related %}
							<a class="list-group-item list-group-item-action px-0" href="{{ url_for('ideas_bp.idea_detail', idea_id=r.id) }}">{{ r.content[:80] + ('…' if r.content|length>80 else '') }}</a>
							{%- endfor %}
						</div>
					{% else %}
						<p class="text-body-secondary small mb-0">No related ideas in this cluster.</p>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
